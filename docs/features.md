# 功能说明

## 列表与目录

- **层级结构**：主义按 id 层级（如 1、1-1、1-1-1）以树形展示，支持展开/折叠子节点。
- **一键展开/折叠**：工具栏图标按钮根据当前状态切换「全部展开」或「全部折叠」。
- **展开到选中**：可将树仅展开到当前选中项所在路径，便于定位。
- **搜索**：顶栏搜索框支持按中文名、英文名或编号过滤列表。

## 学习进度

- **程度等级**：每条主义可标记为 0（未学习）至 4（精通），见 [配置说明](config.md) 中的学习程度。
- **已学/未学区分**：
  - 列表上方显示「已学 x / 总数 y」。
  - 筛选标签：「全部」「已学习」「未学习」可切换查看。
  - 未学习项名称灰色显示，右侧角标为「未」；已学习项角标为数字 1–4 并配不同颜色。
- **保存**：在详情页选择学习程度后点击「保存进度」，数据写入本地。

## 更新主义数据

- **入口**：顶栏最右侧为「更新数据」图标按钮（刷新图标），悬停显示 `title` 提示。
- **流程**：选择本地 `ism.json` → 仅做校验（解析失败则**保持原数据**并提示「解析错误，已保持原数据」）→ 解析成功则弹窗展示条目数并**需用户确认**后才替换 → 替换后自动刷新列表与进度。
- **持久化**：确认替换后写入应用数据目录的 `ism.json`，下次启动使用新数据。

## 详情与链接

- **详情**：点击列表项在右侧（或小屏下全屏）查看场域/轴、特征、相关链接等。
- **链接**：详情中「相关」里的 http(s) 链接可点击，在系统默认浏览器中打开。

## 多端与布局

- **亮/暗主题**：界面跟随系统 `prefers-color-scheme`（macOS/Windows 等系统暗色模式），背景与文字颜色自动切换，避免暗色下文字不可见。
- **主题切换按钮**：顶栏在搜索框与「更新数据」之间提供亮/暗切换图标（亮色时显示月亮、暗色时显示太阳，点击即切换）。首次使用跟随系统；用户点击后选择会写入本地并记住，下次启动沿用上次选择。
- **桌面**：左侧列表、右侧详情并排；顶栏为标题、搜索、主题切换、更新数据图标。
- **安卓/小屏（宽度 ≤768px）**：单栏切换——仅显示列表或仅显示详情；选中某项后显示详情，顶栏出现返回按钮可回到列表。
- **Android 返回键与全面屏手势**：详情页按物理返回键或全面屏返回手势会返回列表；列表页按返回键交给系统处理。
- **触摸**：小屏下列表项、筛选标签、图标按钮等具备不小于约 44px 的触摸区域。
